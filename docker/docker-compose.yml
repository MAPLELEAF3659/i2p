version: '3.6'
services:
  efm:
    privileged: true
    container_name: efm
    image: efm
    build:
     context: .
     dockerfile: Dockerfile
    volumes:
      - <this_repo>:/workspace/efm/
      - <this_repo>/checkpoints/nudenet:/root/.NudeNet
    entrypoint: zsh
    stdin_open: true
    tty: true
    deploy:
      resources:
        reservations:
          devices:
          - driver: nvidia
            capabilities: [gpu]